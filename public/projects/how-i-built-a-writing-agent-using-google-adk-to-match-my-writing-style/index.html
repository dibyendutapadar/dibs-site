<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How I Built a Writing Agent using Google ADK to Match My Writing Style | Dibyendu Tapadar</title>
<meta name="keywords" content="AI PM, Tech for PM, Product Manager Portfolio, Google ADK, Multi Agent Orchestration, Agentic AI">
<meta name="description" content="Mult Agent Orchestrated Blog writer using Google ADK, that learns and matches users writing style">
<meta name="author" content="Dibyendu Tapadar">
<link rel="canonical" href="https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/">
<meta property="og:title" content="How I Built a Writing Agent using Google ADK to Match My Writing Style">
<meta property="og:description" content="Mult Agent Orchestrated Blog writer using Google ADK, that learns and matches users writing style">
<meta property="og:image" content="">
<meta property="og:url" content="https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/">
<meta name="twitter:card" content="summary_large_image">
<meta name="google-site-verification" content="Ksm-dFTFzTkmFmz7MeabjBSLn7pUf19yeCjIFhQXPUM" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.778196ed6ea6927001e4ec13975e74bafb253d50a9dced5b03a16af10f443477.css" integrity="sha256-d4GW7W6mknAB5OwTl150uvslPVCp3O1bA6Fq8Q9ENHc=" rel="preload stylesheet" as="style">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5HCHJ7G6');</script>





<script async src="https://www.googletagmanager.com/gtag/js?id=G-TJTELRQR4M"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TJTELRQR4M');
</script>
<link rel="icon" href="https://dibyendupm.com/img/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://dibyendupm.com/img/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dibyendupm.com/img/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://dibyendupm.com/img/apple-touch-icon.png">
<link rel="mask-icon" href="https://dibyendupm.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true });</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" crossorigin="anonymous"
  onload="renderMathInElement(document.body, {
    delimiters: [
      { left: '$$', right: '$$', display: true },
      { left: '$', right: '$', display: false },
      { left: '\\(', right: '\\)', display: false },
      { left: '\\[', right: '\\]', display: true }
    ],
    throwOnError: false
  });"></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-83JNZXFBJD"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-83JNZXFBJD');
        }
      </script><meta property="og:url" content="https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/">
  <meta property="og:site_name" content="Dibyendu Tapadar">
  <meta property="og:title" content="How I Built a Writing Agent using Google ADK to Match My Writing Style">
  <meta property="og:description" content="Mult Agent Orchestrated Blog writer using Google ADK, that learns and matches users writing style">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2025-12-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-12-07T00:00:00+00:00">
    <meta property="article:tag" content="AI">
    <meta property="article:tag" content="GenAI">
    <meta property="article:tag" content="Google-Adk">
    <meta property="article:tag" content="Multi-Agent">
    <meta property="og:image" content="https://dibyendupm.com/img/blog-writer.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://dibyendupm.com/img/blog-writer.png">
<meta name="twitter:title" content="How I Built a Writing Agent using Google ADK to Match My Writing Style">
<meta name="twitter:description" content="Mult Agent Orchestrated Blog writer using Google ADK, that learns and matches users writing style">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Personal Projects",
      "item": "https://dibyendupm.com/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How I Built a Writing Agent using Google ADK to Match My Writing Style",
      "item": "https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How I Built a Writing Agent using Google ADK to Match My Writing Style",
  "name": "How I Built a Writing Agent using Google ADK to Match My Writing Style",
  "description": "Mult Agent Orchestrated Blog writer using Google ADK, that learns and matches users writing style",
  "keywords": [
    "AI PM", "Tech for PM", "Product Manager Portfolio", "Google ADK", "Multi Agent Orchestration", "Agentic AI"
  ],
  "articleBody": "For a while now, my LinkedIn feed has been a canvas for my thoughts and insights, a place where I’ve honed my perspectives and showcased my experiments.\nTo make things a little structured I though of launching my own portfolio and blog website to house these writings, expand on new topics by categories and connect more deeply with my audience. I built this website with a very effective Obsidian — Hugo Papermod - Netlify combo, and hosted via Cloudfare.\nNow, writing a lot is a lot of work, and that too constant writing. I initially turned to tools like ChatGPT to help generate initial drafts, hoping to speed up the process. While powerful, I quickly ran into a few persistent frustrations.\nThe back-and-forth required to get a decent draft was excessive Context was often forgotten in longer conversations, and most importantly, It consistently failed to capture my distinctive writing style — the tone, the rhythm, the specific way I phrase things.\nIt felt like I was spending more time editing to make it sound like me than I would have writing from scratch.\nThat’s when I decided to take matters into my own hands. I needed a solution that understood my style, remembered our interactions, and could quickly produce initial drafts that genuinely sounded like me. I was exploring agentic frameworks and thought, why not build an agent that solves my oen pain point first.\nIntroducing My Custom Article Writing Agent ADK This project, an article writing agent built using the Google ADK (Agent Development Kit) framework, is my solution to those content creation woes. It’s designed to automate the initial drafting process, allowing me to focus on refining, adding depth, and bringing my unique perspective to the forefront, rather than wrestling with generic AI output.\nHow It Works: A Collaborative Team of Agents Here’s a look at the workflow:\nGeneral Web Search Agent: Every great article starts with solid research. This agent kicks things off by performing in-depth web searches on a given topic and synthesizing key findings. It uses the google_search tool to gather the latest information, ensuring the content is well-informed and up-to-date. Aggregator Agent: Once the research is complete, the Aggregator Agent steps in. Its job is to take all the raw findings from the General Web Search Agent and synthesize them into a coherent, well-structured research brief. This brief then serves as the foundation for the drafting process. The Drafting Loop (The Heart of the System): This is where the magic of style matching truly happens, in an iterative cycle designed for continuous improvement: Writer Agent: Using the aggregated research brief, this agent creates the initial draft of the article. It focuses on clarity, structure, and engaging content. Style Review Agent: This is the secret sauce for personalization. Before it even looks at the draft, this agent calls a special tool (get_writing_style) that fetches my personal writing samples from a writing_style.md file. It then meticulously analyzes my tone, language, and overall “throw” to understand my unique voice. With that understanding, it suggests specific rewrites to the draft to align it perfectly with my established style. I’ve leveraged a more powerful model like gemini-2.5-pro here to ensure nuanced style analysis. Revision Agent: Acting as the lead editor, this agent takes input from both the initial writer and the style reviewer. It ensures the article is complete, incorporates all the user’s original pointers, and crucially, makes sure it matches my style. It’s designed to refine and summarize changes, pushing the article back into the loop for further iterations if needed (currently set for up to 2 cycles) until it’s polished. Formatter Agent: Finally, once the article has been through the drafting and revision loops and is fully approved, the Formatter Agent takes over. It transforms the content into clean, readable markdown, complete with appropriate headings, lists, bolding, italics, and blockquotes, ready for immediate publication. Here’s how you can get started with the Google ADK framework: Copy the repo from here : Github Install Google ADK: It’s as simple as pip install google-adk. Create an Agent: Use adk create to set up your project structure. Update Your **.env** File: Securely include your API key for authentication. Provide Your Writing Style Sample: This is critical for style matching. Create a writing_style.md file and fill it with samples of your writing. The more content you provide, the better the Style Review Agent can learn and replicate your unique voice. Refine Prompts: Tweak the prompts in the agent.py file to perfectly align with your specific needs and preferences. Run the Agent: Start your agent locally with adk run web and prompt it to bring your content ideas to well framed drafts in your own style. ",
  "wordCount" : "785",
  "inLanguage": "en",
  "image":"https://dibyendupm.com/img/blog-writer.png","datePublished": "2025-12-07T00:00:00Z",
  "dateModified": "2025-12-07T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Dibyendu Tapadar"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dibyendupm.com/projects/how-i-built-a-writing-agent-using-google-adk-to-match-my-writing-style/"
  },
  "publisher": {
    "@type": "Person",
    "name": "Dibyendu Tapadar",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dibyendupm.com/img/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5HCHJ7G6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dibyendupm.com/" accesskey="h" title="Dibyendu Tapadar (Alt + H)">Dibyendu Tapadar</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dibyendupm.com/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://dibyendupm.com/work/" title="Experience">
                    <span><i class="fa-solid fa-briefcase"></i>Experience</span>
                </a>
            </li>
            <li>
                <a href="https://dibyendupm.com/projects/" title="Side Projects">
                    <span>Side Projects</span>
                </a>
            </li>
            <li>
                <a href="https://dibyendupm.com/art-of-pm/" title="Art of PMing">
                    <span>Art of PMing</span>
                </a>
            </li>
            <li>
                <a href="https://dibyendupm.com/tech-for-pm/" title="Tech for PM">
                    <span>Tech for PM</span>
                </a>
            </li>
            <li>
                <a href="https://dibyendupm.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      How I Built a Writing Agent using Google ADK to Match My Writing Style
    </h1>
    
    <div class="post-meta"><span title='2025-12-07 00:00:00 +0000 UTC'>December 7, 2025</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>Dibyendu Tapadar</span>

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="https://dibyendupm.com/img/blog-writer.png" alt="alt">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introducing-my-custom-article-writing-agent-adk" aria-label="Introducing My Custom Article Writing Agent ADK">Introducing My Custom Article Writing Agent ADK</a></li>
                <li>
                    <a href="#how-it-works-a-collaborative-team-of-agents" aria-label="How It Works: A Collaborative Team of Agents">How It Works: A Collaborative Team of Agents</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>For a while now, my LinkedIn feed has been a canvas for my thoughts and insights, a place where I’ve honed my perspectives and showcased my experiments.</p>
<p>To make things a little structured I though of launching my own portfolio and blog website to house these writings, expand on new topics by categories and connect more deeply with my audience. I built this website with a very effective  <a href="https://obsidian.md"target="_blank" rel="noopener">
    Obsidian
</a>
 — <a href="https://themes.gohugo.io/themes/hugo-papermod/"target="_blank" rel="noopener">
    Hugo Papermod
</a>
-  <a href="https://netlify.com"target="_blank" rel="noopener">
    Netlify
</a>
  combo, and hosted via Cloudfare.</p>
<p>Now, writing  <em>a lot</em>  is a lot of work, and that too constant writing. I initially turned to tools like ChatGPT to help generate initial drafts, hoping to speed up the process. While powerful, I quickly ran into a few persistent frustrations.</p>
<ul>
<li>The back-and-forth required to get a decent draft was excessive</li>
<li>Context was often forgotten in longer conversations, and most importantly,</li>
</ul>
<blockquote>
<p><strong>It consistently failed to capture  <em>my</em>  distinctive writing style — the tone, the rhythm, the specific way I phrase things.</strong></p>
</blockquote>
<p>It felt like I was spending more time editing to make it sound like me than I would have writing from scratch.</p>
<p>That’s when I decided to take matters into my own hands. I needed a solution that understood my style, remembered our interactions, and could quickly produce initial drafts that genuinely sounded like  <em>me</em>. I was exploring agentic frameworks and thought, why not build an agent that solves my oen pain point first.</p>
<h3 id="introducing-my-custom-article-writing-agent-adk">Introducing My Custom Article Writing Agent ADK<a hidden class="anchor" aria-hidden="true" href="#introducing-my-custom-article-writing-agent-adk">#</a></h3>
<p>This project, an article writing agent built using the Google ADK (Agent Development Kit) framework, is my solution to those content creation woes. It’s designed to automate the initial drafting process, allowing me to focus on refining, adding depth, and bringing my unique perspective to the forefront, rather than wrestling with generic AI output.</p>
<h3 id="how-it-works-a-collaborative-team-of-agents">How It Works: A Collaborative Team of Agents<a hidden class="anchor" aria-hidden="true" href="#how-it-works-a-collaborative-team-of-agents">#</a></h3>
<p>Here’s a look at the workflow:</p>
<ol>
<li><strong>General Web Search Agent</strong>: Every great article starts with solid research. This agent kicks things off by performing in-depth web searches on a given topic and synthesizing key findings. It uses the  <code>google_search</code>  tool to gather the latest information, ensuring the content is well-informed and up-to-date.</li>
<li><strong>Aggregator Agent</strong>: Once the research is complete, the Aggregator Agent steps in. Its job is to take all the raw findings from the General Web Search Agent and synthesize them into a coherent, well-structured research brief. This brief then serves as the foundation for the drafting process.</li>
<li><strong>The Drafting Loop (The Heart of the System)</strong>: This is where the magic of style matching truly happens, in an iterative cycle designed for continuous improvement:
<ol>
<li><strong>Writer Agent</strong>: Using the aggregated research brief, this agent creates the initial draft of the article. It focuses on clarity, structure, and engaging content.</li>
<li><strong>Style Review Agent</strong>: This is the secret sauce for personalization. Before it even looks at the draft, this agent calls a special tool (<code>get_writing_style</code>) that fetches my personal writing samples from a  <code>writing_style.md</code>  file. It then meticulously analyzes my tone, language, and overall &ldquo;throw&rdquo; to understand my unique voice. With that understanding, it suggests specific rewrites to the draft to align it perfectly with my established style. I’ve leveraged a more powerful model like  <code>gemini-2.5-pro</code>  here to ensure nuanced style analysis.</li>
<li><strong>Revision Agent</strong>: Acting as the lead editor, this agent takes input from both the initial writer and the style reviewer. It ensures the article is complete, incorporates all the user’s original pointers, and crucially, makes sure it matches my style. It’s designed to refine and summarize changes, pushing the article back into the loop for further iterations if needed (currently set for up to 2 cycles) until it’s polished.</li>
</ol>
</li>
<li><strong>Formatter Agent</strong>: Finally, once the article has been through the drafting and revision loops and is fully approved, the Formatter Agent takes over. It transforms the content into clean, readable markdown, complete with appropriate headings, lists, bolding, italics, and blockquotes, ready for immediate publication.</li>
</ol>
<hr>
<p>Here’s how you can get started with the Google ADK framework:
Copy the repo from here : <a href="https://github.com/dibyendutapadar/article_writing_agent_adk"target="_blank" rel="noopener">
    Github
</a>
</p>
<ol>
<li><strong>Install Google ADK</strong>: It’s as simple as  <code>pip install google-adk</code>.</li>
<li><strong>Create an Agent</strong>: Use  <code>adk create &lt;folder_name&gt;</code>  to set up your project structure.</li>
<li><strong>Update Your</strong> <code>**.env**</code> <strong>File</strong>: Securely include your API key for authentication.</li>
<li><strong>Provide Your Writing Style Sample</strong>: This is  <em>critical</em>  for style matching. Create a  <code>writing_style.md</code>  file and fill it with samples of your writing. The more content you provide, the better the Style Review Agent can learn and replicate your unique voice.</li>
<li><strong>Refine Prompts</strong>: Tweak the prompts in the  <code>agent.py</code>  file to perfectly align with your specific needs and preferences.</li>
<li><strong>Run the Agent</strong>: Start your agent locally with  <code>adk run web</code>  and prompt it to bring your content ideas to well framed drafts in your own style.</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://dibyendupm.com/tags/ai/">AI</a></li>
      <li><a href="https://dibyendupm.com/tags/genai/">GenAI</a></li>
      <li><a href="https://dibyendupm.com/tags/google-adk/">Google-Adk</a></li>
      <li><a href="https://dibyendupm.com/tags/multi-agent/">Multi-Agent</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://dibyendupm.com/">Dibyendu Tapadar</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> |
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a> |
        <a href="https://obsidian.md/" rel="noopener" target="_blank">Obsidian</a> |
        <a href="https://obsidian.md/" rel="noopener" target="_blank">Netlify</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

<script>
document.querySelectorAll('p, li, h1, h2, h3, h4, h5, h6').forEach(node => {
  node.innerHTML = node.innerHTML.replace(/==([^=]+)==/g, '<mark>$1</mark>');
});
</script>
</body>

</html>
